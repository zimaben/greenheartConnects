"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function asyncGeneratorStep(e,t,n,a,r,o,s){try{var c=e[o](s),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(a,r)}function _asyncToGenerator(c){return function(){var e=this,s=arguments;return new Promise(function(t,n){var a=c.apply(e,s);function r(e){asyncGeneratorStep(a,t,n,r,o,"next",e)}function o(e){asyncGeneratorStep(a,t,n,r,o,"throw",e)}r(void 0)})}}var NeonModalFactory=function(){function n(e,t){document.createDocumentFragment;var n=document.createElement("div"),a=document.createElement("span"),r=document.createElement("div"),o=document.getElementsByTagName("body")[0],s=window.scrollY;n.classList.add("neon-modal"),a.classList.add("close"),r.classList.add("neon-modal-content"),console.log(t),"payment"==t.id&&r.classList.add("payment"),t.hasAttribute("data-modal-size")&&r.classList.add(t.dataset.modalSize),"payment"==!t.id&&r.appendChild(a),r.appendChild(e),n.appendChild(r),o.appendChild(n),o.style.position="fixed",o.style.top=window.scrollY+"px",a.setAttribute("data-scrollback",parseInt(s)),function(e){var t=e.getElementsByTagName("video");{var n;!t.length||void 0!==(n=t[0])&&(n.autoplay=!0,n.play())}}(r),function(e){var t=e.getElementsByTagName("iframe");{var n,a,r;!t.length||void 0!==(n=t[0])&&(console.log(e.getBoundingClientRect().width),a=Math.round(.8*e.getBoundingClientRect().width),r=Math.round(a/16*9),n.height=r,n.width=a)}}(r),a.addEventListener("click",function(e){e.preventDefault();var t=document.getElementsByClassName("neon-modal")[0].querySelector("#neonid-signup-response");null!==t&&(t.innerHTML=""),o.classList.remove("modal-open"),o.removeChild(n),NeonModalFactory.instance=null})}var a;return{getInstance:function(e,t){return null==this.instance?(a=new n(e,t)).constructor=null:!0===NEON_THEME_debug&&console.log("Can't call a modal from inside a modal."),a}}}(),expandMenu=function(e){window.innerWidth<993?document.getElementById("mobile-menu-container").classList.add("active"):e.target.closest(".avatar-right").querySelector(".avatar-right-dropdown").classList.toggle("active"),e.stopPropagation()},closeMobileMenu=function(e){var t=findcontainer("avatar-right-dropdown",e.target);t&&t.classList.remove("active")};function findcontainer(e,t){if(t.id!==e&&"BODY"!==t.tagName)for(;t.id!==e&&"BODY"!==t.tagName;)t=t.parentElement;return"BODY"!==t.tagName&&t}var do_video_modal=function(e){var t='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+e.target.dataset.link.split("/").pop()+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>',n=document.getElementsByTagName("BODY")[0],a=document.createElement("div");a.innerHTML=t,n.classList.add("modal-open"),NeonModalFactory.getInstance(a,e.target)},sendit=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n},e.prev=1,e.next=4,fetch(t,a);case 4:return r=e.sent,e.next=7,r.json();case 7:if(200==(o=e.sent).status)return e.abrupt("return",o);e.next=10;break;case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(e,t){return n.apply(this,arguments)}}(),setName=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,o,s,c,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.classList.contains("saving"))return n=ajaxurl+"?action=updateUserName",a=document.querySelector(t.target.dataset.target).value,r=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.info),r+="&"+encodeURIComponent("name")+"="+encodeURIComponent(a),e.next=8,sendit(n,r);e.next=16;break;case 8:200==(o=e.sent).status?(document.querySelector(".settings-name").innerText=a,document.getElementById("avatar-nav").innerText=a,(s=document.querySelector("#profile-updated")).innerText=o.message,speak(s)):((c=document.querySelector("#profile-updated")).innerText=o.message,speak(c)),document.querySelector(t.target.dataset.target).setAttribute("readonly","readonly"),t.target.innerText="Change",t.target.classList.remove("saving"),e.next=21;break;case 16:i=document.querySelector(t.target.dataset.target),t.target.innerText="Save",t.target.classList.add("saving"),i.removeAttribute("readonly"),i.focus();case 21:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),setEmail=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,o,s,c,i,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!t.target.classList.contains("saving")){e.next=28;break}if(n=ajaxurl+"?action=updateEmail",a=document.querySelector(t.target.dataset.target).value,validateEmail(a))return r=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.info),r+="&"+encodeURIComponent("email")+"="+encodeURIComponent(a),e.next=10,sendit(n,r);e.next=14;break;case 10:(o=e.sent)&&((s=document.querySelector("#profile-updated")).innerText=o.message,speak(s)),e.next=22;break;case 14:(c=document.querySelector("#profile-updated")).innerText="Please enter a valid email.",speak(c),(i=document.querySelector(t.target.dataset.target)).value="",i.setAttribute("readonly","readonly"),t.target.innerText="Change",t.target.classList.remove("saving");case 22:document.querySelector(t.target.dataset.target).setAttribute("readonly","readonly"),t.target.innerText="Change",t.target.classList.remove("saving"),e.next=33;break;case 28:d=document.querySelector(t.target.dataset.target),t.target.innerText="Save",t.target.classList.add("saving"),d.removeAttribute("readonly"),d.focus();case 33:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),setPassword=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,o,s,c,i,d,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!t.target.classList.contains("comparing")){e.next=14;break}n=document.querySelector(t.target.dataset.target),t.target.classList.remove("comparing"),t.target.innerText="",n.setAttribute("readonly","readonly"),document.getElementById("password_confirm").classList.add("active"),(a=document.querySelector(t.target.dataset.compare)).classList.remove("inactive"),a.classList.add("active"),a.focus(),e.next=39;break;case 14:if(!t.target.classList.contains("confirming")){e.next=33;break}if(r=document.querySelector(t.target.dataset.target),o=document.querySelector(t.target.dataset.compare),r.value===o.value)return s=ajaxurl+"?action=updatePassword",c=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.info),c+="&"+encodeURIComponent("password")+"="+encodeURIComponent(r.value),e.next=23,sendit(s,c);e.next=27;break;case 23:(i=e.sent)&&((d=document.querySelector("#profile-updated")).innerText=i.message,speak(d),resetPassword(t.target)),e.next=31;break;case 27:resetPassword(t.target),(u=document.querySelector("#profile-updated")).innerText="Passwords do not match.",speak(u);case 31:e.next=39;break;case 33:l=document.querySelector(t.target.dataset.target),t.target.innerText="Save",t.target.classList.add("comparing"),l.removeAttribute("readonly"),l.placeholder="",l.focus();case 39:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),consentCheckbox=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,o,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ajaxurl+"?action=updateConsent",a=t.target.getAttribute("name"),r=t.target.checked?"yes":"no",o=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.userid),o+="&"+encodeURIComponent(a)+"="+encodeURIComponent(r),e.next=7,sendit(n,o);case 7:(s=e.sent)&&((c=document.querySelector("#profile-updated")).innerText=s.message,speak(c));case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),confirmDeleteGHC=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ajaxurl+"?action=ghc_BTTTTR_deleteUser",a=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.userid),e.next=4,sendit(n,a);case 4:200==(r=e.sent).status?((o=document.querySelector("#profile-updated")).innerText=r.message,speak(o),setTimeout(function(){window.location="/daily-vibe"},4e3)):((s=document.querySelector("#profile-updated")).innerText=r.message,speak(s));case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),deleteAccount=function(e){e.preventDefault();var t=e.target.dataset.userid,n=document.createElement("div"),a=document.createElement("span"),r=document.createElement("h4"),o=document.createElement("button");o.classList.add("modalbutton"),o.setAttribute("data-userid",t),o.setAttribute("onclick","confirmDeleteGHC(event); return false;"),o.innerText="I get it. Delete Me",r.innerText="Delete your Greenheart Connects account?",a.classList.add("warningtext"),a.innerText="This action can't be reversed. Are you sure?",n.appendChild(r),n.appendChild(a),n.appendChild(o);var s,c=document.getElementsByTagName("body")[0];c.classList.contains("modal-open")||(s=n,c.classList.add("modal-open"),NeonModalFactory.getInstance(s,e.target))},validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())};function resetPassword(e){var t,n,a=document.querySelector(e.dataset.target),r=a.parentElement.querySelector(".change"),o=document.getElementById("password_confirm"),s=o.querySelector(".change"),c=document.querySelector(e.dataset.compare);a.value="",a.setAttribute("readonly","readonly"),a.placeholder="••••••••",(t=r.classList).remove.apply(t,_toConsumableArray(r.classList)),r.classList.add("change"),r.innerText="Change",(n=s.classList).remove.apply(n,_toConsumableArray(s.classList)),s.classList.add("change","confirming"),s.innerText="Confirm",c.value="",c.classList.remove("active"),c.classList.add("inactive"),o.classList.remove("active")}function speak(e){e.classList.add("active"),setTimeout(function(){e.classList.remove("active")},4e3)}