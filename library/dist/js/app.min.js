"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function asyncGeneratorStep(e,t,n,r,a,o,s){try{var c=e[o](s),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function _asyncToGenerator(c){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=c.apply(e,s);function a(e){asyncGeneratorStep(r,t,n,a,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,a,o,"throw",e)}a(void 0)})}}var NeonModalFactory=function(){function n(e,t){document.createDocumentFragment;var n=document.createElement("div"),r=document.createElement("span"),a=document.createElement("div"),o=document.getElementsByTagName("body")[0],s=window.scrollY;n.classList.add("neon-modal"),r.classList.add("close"),a.classList.add("neon-modal-content"),"payment"==t.id&&a.classList.add("payment"),t.hasAttribute("data-modal-size")&&a.classList.add(t.dataset.modalSize),"payment"==!t.id&&a.appendChild(r),a.appendChild(e),n.appendChild(a),o.appendChild(n),o.style.position="fixed",o.style.top=window.scrollY+"px",r.setAttribute("data-scrollback",parseInt(s)),!(o=(o=a).getElementsByTagName("video")).length||void 0!==(o=o[0])&&(o.autoplay=!0,o.play()),!(o=(s=a).getElementsByTagName("iframe")).length||void 0!==(a=o[0])&&(o=Math.round(.8*s.getBoundingClientRect().width),s=Math.round(o/16*9),a.height=s,a.width=o),r.addEventListener("click",function(e){e.preventDefault();var t=document.getElementsByTagName("BODY")[0],e=document.getElementsByClassName("neon-modal")[0].querySelector("#neonid-signup-response");null!==e&&(e.innerHTML=""),t.classList.remove("modal-open"),t.setAttribute("style",""),t.removeChild(n),NeonModalFactory.instance=null})}var r;return{getInstance:function(e,t){return null==this.instance?(r=new n(e,t)).constructor=null:!0===NEON_THEME_debug&&console.log("Can't call a modal from inside a modal."),r}}}(),expandMenu=function(e){window.innerWidth<993?document.getElementById("mobile-menu-container").classList.add("active"):e.target.closest(".avatar-right").querySelector(".avatar-right-dropdown").classList.toggle("active"),e.stopPropagation()},closeMobileMenu=function(e){e=findcontainer("avatar-right-dropdown",e.target);e&&e.classList.remove("active")};function findcontainer(e,t){if(t.id!==e&&"BODY"!==t.tagName)for(;t.id!==e&&"BODY"!==t.tagName;)t=t.parentElement;return"BODY"!==t.tagName&&t}var do_video_modal=function(e){var t='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+e.target.dataset.link.split("/").pop()+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>',n=document.getElementsByTagName("BODY")[0],r=document.createElement("div");r.innerHTML=t,n.classList.add("modal-open"),NeonModalFactory.getInstance(r,e.target)},sendit=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n},e.prev=1,e.next=4,fetch(t,a);case 4:if(!(r=e.sent)){e.next=16;break}if(r.ok){e.next=8;break}return e.abrupt("return",Error(response.statusText));case 8:return e.next=10,r.json();case 10:if(a=e.sent)return e.abrupt("return",a);e.next=15;break;case 15:return e.abrupt("return","there was a problem with your fetch request.");case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",e.t0);case 21:case"end":return e.stop()}},e,null,[[1,18]])}));return function(e,t){return n.apply(this,arguments)}}(),setName=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.classList.contains("saving"))return r=ajaxurl+"?action=updateUserName",n=document.querySelector(t.target.dataset.target).value,a=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.info),a+="&"+encodeURIComponent("name")+"="+encodeURIComponent(n),e.next=8,sendit(r,a);e.next=16;break;case 8:200==(r=e.sent).status?(document.querySelector(".settings-name").innerText=n,document.getElementById("avatar-nav").innerText=n,(a=document.querySelector("#profile-updated")).innerText=r.message,speak(a)):((o=document.querySelector("#profile-updated")).innerText=r.message,speak(o)),document.querySelector(t.target.dataset.target).setAttribute("readonly","readonly"),t.target.innerText="Change",t.target.classList.remove("saving"),e.next=21;break;case 16:o=document.querySelector(t.target.dataset.target),t.target.innerText="Save",t.target.classList.add("saving"),o.removeAttribute("readonly"),o.focus();case 21:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),setEmail=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!t.target.classList.contains("saving")){e.next=28;break}if(r=ajaxurl+"?action=updateEmail",n=document.querySelector(t.target.dataset.target).value,validateEmail(n))return a=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.info),a+="&"+encodeURIComponent("email")+"="+encodeURIComponent(n),e.next=10,sendit(r,a);e.next=14;break;case 10:(r=e.sent)&&((a=document.querySelector("#profile-updated")).innerText=r.message,speak(a)),e.next=22;break;case 14:(o=document.querySelector("#profile-updated")).innerText="Please enter a valid email.",speak(o),(o=document.querySelector(t.target.dataset.target)).value="",o.setAttribute("readonly","readonly"),t.target.innerText="Change",t.target.classList.remove("saving");case 22:document.querySelector(t.target.dataset.target).setAttribute("readonly","readonly"),t.target.innerText="Change",t.target.classList.remove("saving"),e.next=33;break;case 28:o=document.querySelector(t.target.dataset.target),t.target.innerText="Save",t.target.classList.add("saving"),o.removeAttribute("readonly"),o.focus();case 33:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),setPassword=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!t.target.classList.contains("comparing")){e.next=14;break}n=document.querySelector(t.target.dataset.target),t.target.classList.remove("comparing"),t.target.innerText="",n.setAttribute("readonly","readonly"),document.getElementById("password_confirm").classList.add("active"),(r=document.querySelector(t.target.dataset.compare)).classList.remove("inactive"),r.classList.add("active"),r.focus(),e.next=39;break;case 14:if(!t.target.classList.contains("confirming")){e.next=33;break}if(n=document.querySelector(t.target.dataset.target),r=document.querySelector(t.target.dataset.compare),n.value===r.value)return a=ajaxurl+"?action=updatePassword",o=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.info),o+="&"+encodeURIComponent("password")+"="+encodeURIComponent(n.value),e.next=23,sendit(a,o);e.next=27;break;case 23:(a=e.sent)&&((o=document.querySelector("#profile-updated")).innerText=a.message,speak(o),resetPassword(t.target)),e.next=31;break;case 27:resetPassword(t.target),(s=document.querySelector("#profile-updated")).innerText="Passwords do not match.",speak(s);case 31:e.next=39;break;case 33:s=document.querySelector(t.target.dataset.target),t.target.innerText="Save",t.target.classList.add("comparing"),s.removeAttribute("readonly"),s.placeholder="",s.focus();case 39:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),consentCheckbox=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=ajaxurl+"?action=updateConsent",n=t.target.getAttribute("name"),r=t.target.checked?"yes":"no",o=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.userid),o+="&"+encodeURIComponent(n)+"="+encodeURIComponent(r),e.next=7,sendit(a,o);case 7:(a=e.sent)&&((o=document.querySelector("#profile-updated")).innerText=a.message,speak(o));case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),confirmDeleteGHC=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ajaxurl+"?action=ghc_BTTTTR_deleteUser",r=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.userid),e.next=4,sendit(n,r);case 4:200==(r=e.sent).status?((a=document.querySelector("#profile-updated")).innerText=r.message,speak(a),setTimeout(function(){window.location="/daily-vibe"},4e3)):((a=document.querySelector("#profile-updated")).innerText=r.message,speak(a));case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),deleteAccount=function(e){e.preventDefault();var t=e.target.dataset.userid,n=document.createElement("div"),r=document.createElement("span"),a=document.createElement("h4"),o=document.createElement("button");o.classList.add("modalbutton"),o.setAttribute("data-userid",t),o.setAttribute("onclick","confirmDeleteGHC(event); return false;"),o.innerText="I get it. Delete Me",a.innerText="Delete your Greenheart Connects account?",r.classList.add("warningtext"),r.innerText="This action can't be reversed. Are you sure?",n.appendChild(a),n.appendChild(r),n.appendChild(o);o=document.getElementsByTagName("body")[0];o.classList.contains("modal-open")||(n=n,o.classList.add("modal-open"),NeonModalFactory.getInstance(n,e.target))},validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())};function resetPassword(e){var t=document.querySelector(e.dataset.target),n=t.parentElement.querySelector(".change"),r=document.getElementById("password_confirm"),a=r.querySelector(".change"),e=document.querySelector(e.dataset.compare);t.value="",t.setAttribute("readonly","readonly"),t.placeholder="••••••••",(t=n.classList).remove.apply(t,_toConsumableArray(n.classList)),n.classList.add("change"),n.innerText="Change",(n=a.classList).remove.apply(n,_toConsumableArray(a.classList)),a.classList.add("change","confirming"),a.innerText="Confirm",e.value="",e.classList.remove("active"),e.classList.add("inactive"),r.classList.remove("active")}function speak(e){e.classList.add("active"),setTimeout(function(){e.classList.remove("active")},4e3)}