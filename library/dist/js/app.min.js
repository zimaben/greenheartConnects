"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function asyncGeneratorStep(e,t,n,r,a,o,s){try{var c=e[o](s),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function _asyncToGenerator(c){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=c.apply(e,s);function a(e){asyncGeneratorStep(r,t,n,a,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,a,o,"throw",e)}a(void 0)})}}var NeonModalFactory=function(){function n(e,t){document.createDocumentFragment;var n=document.createElement("div"),r=document.createElement("span"),a=document.createElement("div"),o=document.getElementsByTagName("body")[0],s=window.scrollY;n.classList.add("neon-modal"),r.classList.add("close"),a.classList.add("neon-modal-content"),console.log(t),"payment"==t.id&&a.classList.add("payment"),t.hasAttribute("data-modal-size")&&a.classList.add(t.dataset.modalSize),"payment"==!t.id&&a.appendChild(r),a.appendChild(e),n.appendChild(a),o.appendChild(n),o.style.position="fixed",o.style.top=window.scrollY+"px",r.setAttribute("data-scrollback",parseInt(s)),function(e){var t=e.getElementsByTagName("video");{var n;!t.length||void 0!==(n=t[0])&&(n.autoplay=!0,n.play())}}(a),function(e){var t=e.getElementsByTagName("iframe");{var n,r,a;!t.length||void 0!==(n=t[0])&&(console.log(e.getBoundingClientRect().width),r=Math.round(.8*e.getBoundingClientRect().width),a=Math.round(r/16*9),n.height=a,n.width=r)}}(a),r.addEventListener("click",function(e){e.preventDefault();var t=document.getElementsByClassName("neon-modal")[0].querySelector("#neonid-signup-response");null!==t&&(t.innerHTML=""),o.classList.remove("modal-open"),o.removeChild(n),NeonModalFactory.instance=null})}var r;return{getInstance:function(e,t){return null==this.instance?(r=new n(e,t)).constructor=null:!0===NEON_THEME_debug&&console.log("Can't call a modal from inside a modal."),r}}}(),expandMenu=function(e){window.innerWidth<993?document.getElementById("mobile-menu-container").classList.add("active"):e.target.closest(".avatar-right").querySelector(".avatar-right-dropdown").classList.toggle("active"),e.stopPropagation()},closeMobileMenu=function(e){var t=findcontainer("avatar-right-dropdown",e.target);t&&t.classList.remove("active")};function findcontainer(e,t){if(t.id!==e&&"BODY"!==t.tagName)for(;t.id!==e&&"BODY"!==t.tagName;)t=t.parentElement;return"BODY"!==t.tagName&&t}var do_video_modal=function(e){var t='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+e.target.dataset.link.split("/").pop()+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>',n=document.getElementsByTagName("BODY")[0],r=document.createElement("div");r.innerHTML=t,n.classList.add("modal-open"),NeonModalFactory.getInstance(r,e.target)},sendit=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n},e.prev=1,e.next=4,fetch(t,r);case 4:if(!(a=e.sent)){e.next=16;break}if(a.ok){e.next=8;break}return e.abrupt("return",Error(response.statusText));case 8:return e.next=10,a.json();case 10:if(o=e.sent)return e.abrupt("return",o);e.next=15;break;case 15:return e.abrupt("return","there was a problem with your fetch request.");case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",e.t0);case 21:case"end":return e.stop()}},e,null,[[1,18]])}));return function(e,t){return n.apply(this,arguments)}}(),setName=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o,s,c,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.target.classList.contains("saving"))return n=ajaxurl+"?action=updateUserName",r=document.querySelector(t.target.dataset.target).value,a=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.info),a+="&"+encodeURIComponent("name")+"="+encodeURIComponent(r),e.next=8,sendit(n,a);e.next=16;break;case 8:200==(o=e.sent).status?(document.querySelector(".settings-name").innerText=r,document.getElementById("avatar-nav").innerText=r,(s=document.querySelector("#profile-updated")).innerText=o.message,speak(s)):((c=document.querySelector("#profile-updated")).innerText=o.message,speak(c)),document.querySelector(t.target.dataset.target).setAttribute("readonly","readonly"),t.target.innerText="Change",t.target.classList.remove("saving"),e.next=21;break;case 16:i=document.querySelector(t.target.dataset.target),t.target.innerText="Save",t.target.classList.add("saving"),i.removeAttribute("readonly"),i.focus();case 21:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),setEmail=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o,s,c,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!t.target.classList.contains("saving")){e.next=28;break}if(n=ajaxurl+"?action=updateEmail",r=document.querySelector(t.target.dataset.target).value,validateEmail(r))return a=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.info),a+="&"+encodeURIComponent("email")+"="+encodeURIComponent(r),e.next=10,sendit(n,a);e.next=14;break;case 10:(o=e.sent)&&((s=document.querySelector("#profile-updated")).innerText=o.message,speak(s)),e.next=22;break;case 14:(c=document.querySelector("#profile-updated")).innerText="Please enter a valid email.",speak(c),(i=document.querySelector(t.target.dataset.target)).value="",i.setAttribute("readonly","readonly"),t.target.innerText="Change",t.target.classList.remove("saving");case 22:document.querySelector(t.target.dataset.target).setAttribute("readonly","readonly"),t.target.innerText="Change",t.target.classList.remove("saving"),e.next=33;break;case 28:u=document.querySelector(t.target.dataset.target),t.target.innerText="Save",t.target.classList.add("saving"),u.removeAttribute("readonly"),u.focus();case 33:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),setPassword=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o,s,c,i,u,d,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!t.target.classList.contains("comparing")){e.next=14;break}n=document.querySelector(t.target.dataset.target),t.target.classList.remove("comparing"),t.target.innerText="",n.setAttribute("readonly","readonly"),document.getElementById("password_confirm").classList.add("active"),(r=document.querySelector(t.target.dataset.compare)).classList.remove("inactive"),r.classList.add("active"),r.focus(),e.next=39;break;case 14:if(!t.target.classList.contains("confirming")){e.next=33;break}if(a=document.querySelector(t.target.dataset.target),o=document.querySelector(t.target.dataset.compare),a.value===o.value)return s=ajaxurl+"?action=updatePassword",c=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.info),c+="&"+encodeURIComponent("password")+"="+encodeURIComponent(a.value),e.next=23,sendit(s,c);e.next=27;break;case 23:(i=e.sent)&&((u=document.querySelector("#profile-updated")).innerText=i.message,speak(u),resetPassword(t.target)),e.next=31;break;case 27:resetPassword(t.target),(d=document.querySelector("#profile-updated")).innerText="Passwords do not match.",speak(d);case 31:e.next=39;break;case 33:l=document.querySelector(t.target.dataset.target),t.target.innerText="Save",t.target.classList.add("comparing"),l.removeAttribute("readonly"),l.placeholder="",l.focus();case 39:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),consentCheckbox=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ajaxurl+"?action=updateConsent",r=t.target.getAttribute("name"),a=t.target.checked?"yes":"no",o=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.userid),o+="&"+encodeURIComponent(r)+"="+encodeURIComponent(a),e.next=7,sendit(n,o);case 7:(s=e.sent)&&((c=document.querySelector("#profile-updated")).innerText=s.message,speak(c));case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),confirmDeleteGHC=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ajaxurl+"?action=ghc_BTTTTR_deleteUser",r=encodeURIComponent("userid")+"="+encodeURIComponent(t.target.dataset.userid),e.next=4,sendit(n,r);case 4:200==(a=e.sent).status?((o=document.querySelector("#profile-updated")).innerText=a.message,speak(o),setTimeout(function(){window.location="/daily-vibe"},4e3)):((s=document.querySelector("#profile-updated")).innerText=a.message,speak(s));case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),deleteAccount=function(e){e.preventDefault();var t=e.target.dataset.userid,n=document.createElement("div"),r=document.createElement("span"),a=document.createElement("h4"),o=document.createElement("button");o.classList.add("modalbutton"),o.setAttribute("data-userid",t),o.setAttribute("onclick","confirmDeleteGHC(event); return false;"),o.innerText="I get it. Delete Me",a.innerText="Delete your Greenheart Connects account?",r.classList.add("warningtext"),r.innerText="This action can't be reversed. Are you sure?",n.appendChild(a),n.appendChild(r),n.appendChild(o);var s,c=document.getElementsByTagName("body")[0];c.classList.contains("modal-open")||(s=n,c.classList.add("modal-open"),NeonModalFactory.getInstance(s,e.target))},validateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())};function resetPassword(e){var t,n,r=document.querySelector(e.dataset.target),a=r.parentElement.querySelector(".change"),o=document.getElementById("password_confirm"),s=o.querySelector(".change"),c=document.querySelector(e.dataset.compare);r.value="",r.setAttribute("readonly","readonly"),r.placeholder="••••••••",(t=a.classList).remove.apply(t,_toConsumableArray(a.classList)),a.classList.add("change"),a.innerText="Change",(n=s.classList).remove.apply(n,_toConsumableArray(s.classList)),s.classList.add("change","confirming"),s.innerText="Confirm",c.value="",c.classList.remove("active"),c.classList.add("inactive"),o.classList.remove("active")}function speak(e){e.classList.add("active"),setTimeout(function(){e.classList.remove("active")},4e3)}