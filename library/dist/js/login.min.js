"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function asyncGeneratorStep(e,t,n,r,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function _asyncToGenerator(i){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=i.apply(e,s);function a(e){asyncGeneratorStep(r,t,n,a,o,"next",e)}function o(e){asyncGeneratorStep(r,t,n,a,o,"throw",e)}a(void 0)})}}var NeonModalFactory=function(){function n(e,t){document.createDocumentFragment;var n=document.createElement("div"),r=document.createElement("span"),a=document.createElement("div"),o=document.getElementsByTagName("body")[0],s=window.scrollY;n.classList.add("neon-modal"),r.classList.add("close"),a.classList.add("neon-modal-content"),a.appendChild(r),a.appendChild(e),n.appendChild(a),o.appendChild(n),o.style.position="fixed",o.style.top=window.scrollY+"px",r.setAttribute("data-scrollback",parseInt(s)),!(o=(o=a).getElementsByTagName("video")).length||void 0!==(o=o[0])&&(o.autoplay=!0,o.play()),!(o=(s=a).getElementsByTagName("iframe")).length||void 0!==(a=o[0])&&(o=Math.round(.8*s.getBoundingClientRect().width),s=Math.round(o/16*9),a.height=s,a.width=o),r.addEventListener("click",function(e){e.preventDefault();var t=document.getElementsByTagName("BODY")[0],e=document.getElementsByClassName("neon-modal")[0].querySelector("#neonid-signup-response");null!==e&&(e.innerHTML=""),t.classList.remove("modal-open"),t.setAttribute("style",""),t.removeChild(n),NeonModalFactory.instance=null})}var r;return{getInstance:function(e,t){return null==this.instance?(r=new n(e)).constructor=null:!0===NEON_THEME_debug&&console.log("Can't call a modal from inside a modal."),r}}}(),submitRegistration=function(e){e.preventDefault();var t=document.getElementById("passwordconfirm"),n=document.getElementById("password"),r=document.getElementById("frontendvalidation");r.innerText="",r.classList.add("hidden");var a=!1,o=!1,s=!0;t.classList.contains("active")?0<t.value.length&&0<n.value.length?t.value===n.value?o=!0:new Dialog({text:a="Passwords do not match."}):new Dialog({text:a="Please confirm password."}):s=!0;e=document.getElementById("email").value;validateEmail(e)||new Dialog({text:a="Please enter a valid email."}),!a&&o?(document.getElementById("username").value=e,r=document.getElementById("firstname").value,o=document.getElementById("lastname").value,registerIt(e,e,n.value,r,o)):!a&&s&&(s=document.getElementById("confirmlabel"),t.classList.add("active"),s.classList.add("active"))};function registerIt(e,t,n,r,a){return _registerIt.apply(this,arguments)}function _registerIt(){return(_registerIt=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n,r,a,o){var s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=ajaxurl+"?action=register_user_front_end",i=encodeURIComponent("username")+"="+encodeURIComponent(t),i+="&"+encodeURIComponent("email")+"="+encodeURIComponent(n),i+="&"+encodeURIComponent("password")+"="+encodeURIComponent(r),i+="&"+encodeURIComponent("firstname")+"="+encodeURIComponent(a),i+="&"+encodeURIComponent("lastname")+"="+encodeURIComponent(o),e.next=8,sendit(s,i);case 8:(s=e.sent)?(document.getElementById("frontendvalidation"),200==s.status?(i=JSON.parse(s.message),window.location="/?&firstname="+i.firstname+"&lastname="+i.lastname+"&email="+i.email):new Dialog({text:s.message})):new Dialog({text:"No response from server"});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var goToMyInfo=function(e){e.preventDefault(),document.getElementById("section_membership").classList.add("done"),document.getElementById("section_myinfo").classList.add("active"),document.querySelector('.gform_footer>input[type="submit"]').classList.add("active")},sendit=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n},e.prev=1,e.next=4,fetch(t,r);case 4:return r=e.sent,e.next=7,r.json();case 7:if(200==(a=e.sent).status)return e.abrupt("return",a);e.next=12;break;case 12:return e.abrupt("return",a);case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(1),console.log(e.t0),new Dialog({text:JSON.stringify(e.t0)}),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}},e,null,[[1,15]])}));return function(e,t){return n.apply(this,arguments)}}();function validateUsername(e){if(4<=e.length)return/^[a-z0-9]+$/.test(e);return!1}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var loginModal=function(e){e.preventDefault();var t=document.getElementById(e.target.dataset.modalTarget),n=document.getElementsByTagName("body")[0];n.classList.contains("modal-open")||(t=t.cloneNode(!0),n.classList.add("modal-open"),NeonModalFactory.getInstance(t,e.target))},Dialog=function(){function t(e){_classCallCheck(this,t),this.text=e.text||"",this.type=e.type||"message",this.position=e.position||"default",this.colorclass=e.colorclass||"",this.time=e.time||3e3,this.parent=e.parent||null,this.returned=!0,this.checkReturned=function(){return this.returned},this.addConfirmButtons=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(t,e){var n=document.createElement("SPAN"),r=document.createElement("SPAN");n.classList.add("confirm_button"),r.classList.add("deny_button"),a.appendChild(n),a.appendChild(r),n.addEventListener("click",function(e){e=e.target.closest("DIV");e.parentElement.removeChild(e),t(!0)}),r.addEventListener("click",function(e){e=e.target.closest("DIV");e.parentElement.removeChild(e),t(!1)})}));case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),this.addDismiss=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(t,e){var n=document.createElement("SPAN");n.classList.add("dismiss_button"),r.appendChild(n),n.addEventListener("click",function(e){e=e.target.closest("DIV");e.parentElement.removeChild(e),t(!0)})}));case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),this.isQuery=function(e){return/^[.#\[]/.test(e)},this.findBox=function(){return null===this.parent?null:("string"==typeof this.parent&&(e=this.isQuery(this.parent)?document.querySelector(this.parent):document.getElementById(this.parent),this.parent=e.hasOwnProperty("tagName")?e:null),this.parent.hasOwnProperty("tagName")||(this.parent=null),this.parent.getBoundingClientRect()?this.parent.getBoundingClientRect():null);var e},this.render=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,r,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("login called"),(s=document.getElementsByClassName("system-dialog")).length){t=_createForOfIteratorHelper(s);try{for(t.s();!(n=t.n()).done;)n.value.remove()}catch(e){t.e(e)}finally{t.f()}}if(r=document.createElement("div"),a=document.createElement("span"),r.classList.add("system-dialog"),a.classList.add("the_message"),a.innerHTML='<span class="header"></span><span class="dialog_text">'+this.text+"</span>",r.appendChild(a),this.colorclass&&a.classList.add(this.colorclass),"object"!==_typeof(o=this.findBox())||null===o){e.next=30;break}e.t0=this.position,e.next="topright"===e.t0?15:"topleft"===e.t0?18:"bottomleft"===e.t0?21:"deadcenter"===e.t0?24:27;break;case 15:return a.setAttribute("right",o.right-10),a.setAttribute("top",o.top-10),e.abrupt("break",30);case 18:return a.setAttribute("left",o.left+10),a.setAttribute("top",o.top+10),e.abrupt("break",30);case 21:return a.setAttribute("left",o.left+10),a.setAttribute("bottom",o.bottom-10),e.abrupt("break",30);case 24:return a.setAttribute("left",o.x+o.width/2-15),a.setAttribute("top",o.y+o.height/2-15),e.abrupt("break",30);case 27:return a.setAttribute("right",o.right-10),a.setAttribute("bottom",o.bottom-10),e.abrupt("break",30);case 30:if((s=document.getElementsByTagName("BODY")[0]).insertBefore(r,s.firstChild),"message"!=this.type){e.next=37;break}s=this.time,setTimeout(function(){r.parentElement.removeChild(r),this.returned=!0},s),e.next=48;break;case 37:if(r.classList.add(this.type),"confirm"===this.type)return e.next=41,this.addConfirmButtons(a);e.next=44;break;case 41:this.returned=e.sent,e.next=48;break;case 44:if("dismiss"===this.type)return e.next=47,this.addDismiss(a);e.next=48;break;case 47:this.returned=e.sent;case 48:return e.abrupt("return",this.returned);case 49:case"end":return e.stop()}},e,this)})),this.render()}return _createClass(t,[{key:"then",value:function(e,t){e(this.render())}}]),t}();